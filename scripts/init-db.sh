#!/bin/bash

echo "ğŸš€ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–ã‚’é–‹å§‹ã—ã¾ã™..."

# Apply database migrations
echo "ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é©ç”¨ä¸­..."
npx prisma migrate deploy

if [ $? -eq 0 ]; then
    echo "âœ… ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†"
else
    echo "âŒ ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å¤±æ•—"
    exit 1
fi

# Run setup script to create test users
echo "ğŸ‘¤ ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆä¸­..."
node setup.js

if [ $? -eq 0 ]; then
    echo "âœ… ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†ï¼"
    echo "ğŸ“§ ãƒ†ã‚¹ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆ: admin@construction.com / admin123"
else
    echo "âŒ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å¤±æ•—"
    exit 1
fi